# Puerto del servidor
server.port=8080
# application.properties

# Timeouts de Firebase (en milisegundos)
firebase.connect.timeout=60000
firebase.read.timeout=60000

# Timeout de Firestore Service (en segundos) - AUMENTAR
firestore.timeout.seconds=200

# Configuración de pedidos
orders.pending.age.minutes=5
# ============================================
# SPRING MULTIPART (FILE UPLOAD) CONFIG
# ============================================
# Tamaño máximo por archivo (ej. 20MB)
spring.servlet.multipart.max-file-size=20MB
# Tamaño máximo de la petición completa (ej. 20MB)
spring.servlet.multipart.max-request-size=20MB
# ============================================
# MERCADOPAGO CONFIGURATION
# ============================================

# Access Token
mercadopago.access.token=${MERCADOPAGO_ACCESS_TOKEN:}

# URLs de redirección después del pago
mercadopago.success.url=http://localhost:8080/api/pagos/success
mercadopago.failure.url=http://localhost:8080/api/pagos/failure
mercadopago.pending.url=http://localhost:8080/api/pagos/pending

# URL de notificación de webhooks
mercadopago.notification.url=${MERCADOPAGO_NOTIFICATION_URL;}

# Secret para validar firma de webhooks
webhook.secret=${MERCADOPAGO_WEBHOOK_SECRET:}
mercadopago.webhook.secret=${MERCADOPAGO_WEBHOOK_SECRET:}
# ============================================
# FIREBASE CONFIGURATION
# ============================================
firebase.service.account.path=${FIREBASE_SERVICE_ACCOUNT_PATH:}

# ============================================
# DROPBOX CONFIGURATION
# ============================================
dropbox.access.token=${DROPBOX_ACCESS_TOKEN:}
dropbox.folder.path=${DROPBOX_FOLDER_PATH:/medify/imagenes}

# ============================================
# CORS CONFIGURATION
# ============================================
cors.allowed-origins=*

# ============================================
# RATE LIMITING CONFIGURATION
# ============================================
rate.limit.requests.per.minute=10
rate.limit.requests.per.hour=100
rate.limit.webhook.per.minute=5

# ============================================
# WEBHOOK LOCK CONFIGURATION
# ============================================
webhook.lock.timeout.seconds=300

# ========== CONFIGURACIÓN DE LIMPIEZA DE PEDIDOS ==========

# Ejecutar cada X minutos (900000 ms = 15 min)
orders.cleanup.fixedRateMs=180000

# Esperar X minuto después del inicio antes de la primera ejecución
orders.cleanup.initialDelayMs=60000

# Pedidos pendientes mayores a X mins se marcan como abandonados
orders.pending.age.minutes=12
